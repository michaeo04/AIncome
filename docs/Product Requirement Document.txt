# FUNCTION LIST - APP QUáº¢N LÃ TÃ€I CHÃNH CÃ NHÃ‚N

## 1. Tá»”NG QUAN Dá»° ÃN

**TÃªn dá»± Ã¡n:** Personal Finance Tracker  
**Má»¥c tiÃªu:** XÃ¢y dá»±ng á»©ng dá»¥ng quáº£n lÃ½ tÃ i chÃ­nh cÃ¡ nhÃ¢n Ä‘Æ¡n giáº£n, giÃºp ngÆ°á»i dÃ¹ng theo dÃµi thu chi thá»§ cÃ´ng, Ä‘áº·t ngÃ¢n sÃ¡ch theo danh má»¥c vÃ  theo dÃµi má»¥c tiÃªu tiáº¿t kiá»‡m

**Concept chÃ­nh:**
- á»¨ng dá»¥ng cÃ¡ nhÃ¢n hÃ³a cho **1 ngÆ°á»i dÃ¹ng duy nháº¥t** (1 tÃ i khoáº£n = 1 ngÆ°á»i)
- **Tracking thá»§ cÃ´ng** cÃ¡c giao dá»‹ch thu (Income) vÃ  chi (Expense)
- **Net Balance:** Sá»‘ dÆ° thá»±c táº¿ = Tá»•ng thu - Tá»•ng chi
- **Budget Management:** Äáº·t ngÃ¢n sÃ¡ch theo category chi tiÃªu, nháº­n cáº£nh bÃ¡o khi gáº§n/vÆ°á»£t ngÆ°á»¡ng
- **Saving Goals:** Táº¡o má»¥c tiÃªu tiáº¿t kiá»‡m, theo dÃµi tiáº¿n Ä‘á»™ dá»±a trÃªn Net Balance tÃ­ch lÅ©y theo thá»i gian
- Giao diá»‡n Ä‘Æ¡n giáº£n, trá»±c quan, táº­p trung vÃ o tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng

**Äá»‘i tÆ°á»£ng ngÆ°á»i dÃ¹ng:**
- CÃ¡ nhÃ¢n muá»‘n quáº£n lÃ½ tÃ i chÃ­nh hÃ ng ngÃ y
- Äá»™ tuá»•i: 18-45
- NgÆ°á»i má»›i báº¯t Ä‘áº§u quáº£n lÃ½ tÃ i chÃ­nh cÃ¡ nhÃ¢n


## 2. Cáº¤U TRÃšC APP

### Navigation Bar (Bottom Navigation)
1. **Home** - Tá»•ng quan & danh sÃ¡ch giao dá»‹ch
2. **Budget** - Quáº£n lÃ½ ngÃ¢n sÃ¡ch theo category
3. **Analysis** - BÃ¡o cÃ¡o & phÃ¢n tÃ­ch
4. **Profile** - CÃ i Ä‘áº·t & thÃ´ng tin cÃ¡ nhÃ¢n
5. **Floating "Add" Button** - ThÃªm giao dá»‹ch nhanh

### Module ChÃ­nh
- **Module 1:** Authentication (XÃ¡c thá»±c ngÆ°á»i dÃ¹ng)
- **Module 2:** Onboarding (Giá»›i thiá»‡u app láº§n Ä‘áº§u)
- **Module 3:** Transaction Management (Quáº£n lÃ½ giao dá»‹ch)
- **Module 4:** Category Management (Quáº£n lÃ½ danh má»¥c)
- **Module 5:** Budget Management (Quáº£n lÃ½ ngÃ¢n sÃ¡ch)
- **Module 6:** Saving Goals (Má»¥c tiÃªu tiáº¿t kiá»‡m)
- **Module 7:** Analysis & Reports (PhÃ¢n tÃ­ch & bÃ¡o cÃ¡o)
- **Module 8:** Profile & Settings (Há»“ sÆ¡ & cÃ i Ä‘áº·t)

---

### Supabase Project Settings
**Láº¥y credentials tá»« Supabase Dashboard:**
1. VÃ o project dashboard: https://app.supabase.com
2. Settings â†’ API
3. Copy:
   - Project URL
   - anon public key (cho client)
   - service_role key (cho server/admin - giá»¯ bÃ­ máº­t)

---

## 3. CHI TIáº¾T CHá»¨C NÄ‚NG

## MODULE 1: AUTHENTICATION (XÃC THá»°C)

### 1.1. ÄÄƒng kÃ½ tÃ i khoáº£n
**MÃ´ táº£:** NgÆ°á»i dÃ¹ng táº¡o tÃ i khoáº£n má»›i Ä‘á»ƒ báº¯t Ä‘áº§u sá»­ dá»¥ng app

**YÃªu cáº§u chá»©c nÄƒng:**
- Nháº­p email
- Nháº­p máº­t kháº©u (tá»‘i thiá»ƒu 8 kÃ½ tá»±, cÃ³ chá»¯ vÃ  sá»‘)
- XÃ¡c nháº­n máº­t kháº©u
- Nháº­p tÃªn hiá»ƒn thá»‹
- TÃ¹y chá»n: ÄÄƒng kÃ½ nhanh báº±ng Google/Apple
- Äá»“ng Ã½ Ä‘iá»u khoáº£n sá»­ dá»¥ng

**Acceptance Criteria:**
- Validate email Ä‘Ãºng Ä‘á»‹nh dáº¡ng
- Máº­t kháº©u pháº£i Ä‘á»§ máº¡nh (cÃ³ chá»¯ hoa, chá»¯ thÆ°á»ng, sá»‘)
- Hai máº­t kháº©u pháº£i khá»›p nhau
- Gá»­i email xÃ¡c thá»±c (optional cho MVP)
- Táº¡o tÃ i khoáº£n thÃ nh cÃ´ng â†’ Chuyá»ƒn sang Onboarding

### 1.2. ÄÄƒng nháº­p
**MÃ´ táº£:** NgÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p vÃ o app

**YÃªu cáº§u chá»©c nÄƒng:**
- Nháº­p email vÃ  máº­t kháº©u
- TÃ¹y chá»n: ÄÄƒng nháº­p báº±ng Google/Apple
- Checkbox "Ghi nhá»› Ä‘Äƒng nháº­p"
- Link "QuÃªn máº­t kháº©u"

**Acceptance Criteria:**
- ThÃ´ng bÃ¡o lá»—i rÃµ rÃ ng náº¿u sai email/máº­t kháº©u
- Giá»›i háº¡n 5 láº§n Ä‘Äƒng nháº­p sai â†’ khÃ³a 15 phÃºt
- ÄÄƒng nháº­p thÃ nh cÃ´ng â†’ Vá» Home screen
- NgÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p â†’ KhÃ´ng cáº§n Ä‘Äƒng nháº­p láº¡i

### 1.3. QuÃªn máº­t kháº©u
**MÃ´ táº£:** KhÃ´i phá»¥c máº­t kháº©u khi quÃªn

**YÃªu cáº§u chá»©c nÄƒng:**
- Nháº­p email Ä‘Ã£ Ä‘Äƒng kÃ½
- Há»‡ thá»‘ng gá»­i email cÃ³ link reset máº­t kháº©u
- Click link â†’ Nháº­p máº­t kháº©u má»›i
- XÃ¡c nháº­n máº­t kháº©u má»›i

**Acceptance Criteria:**
- Link reset cÃ³ hiá»‡u lá»±c 15 phÃºt
- Máº­t kháº©u má»›i khÃ´ng Ä‘Æ°á»£c trÃ¹ng máº­t kháº©u cÅ©
- ThÃ´ng bÃ¡o thÃ nh cÃ´ng â†’ Chuyá»ƒn vá» mÃ n hÃ¬nh Ä‘Äƒng nháº­p

### 1.4. ÄÄƒng xuáº¥t
**MÃ´ táº£:** ÄÄƒng xuáº¥t khá»i tÃ i khoáº£n

**YÃªu cáº§u chá»©c nÄƒng:**
- Button Ä‘Äƒng xuáº¥t á»Ÿ Profile screen
- XÃ¡c nháº­n trÆ°á»›c khi Ä‘Äƒng xuáº¥t
- Clear session vÃ  vá» mÃ n hÃ¬nh Ä‘Äƒng nháº­p

---

## MODULE 2: ONBOARDING

### 2.1. Welcome Screens
**MÃ´ táº£:** Giá»›i thiá»‡u app cho ngÆ°á»i dÃ¹ng láº§n Ä‘áº§u

**YÃªu cáº§u chá»©c nÄƒng:**
- 3-4 mÃ n hÃ¬nh giá»›i thiá»‡u vá»›i illustration
- MÃ n hÃ¬nh 1: Giá»›i thiá»‡u app vÃ  lá»£i Ã­ch
- MÃ n hÃ¬nh 2: TÃ­nh nÄƒng theo dÃµi thu chi
- MÃ n hÃ¬nh 3: TÃ­nh nÄƒng ngÃ¢n sÃ¡ch vÃ  má»¥c tiÃªu tiáº¿t kiá»‡m
- MÃ n hÃ¬nh 4: Call-to-action "Báº¯t Ä‘áº§u"
- CÃ³ nÃºt "Skip" Ä‘á»ƒ bá» qua
- Cháº¥m chá»‰ bÃ¡o (dot indicator) vá»‹ trÃ­ mÃ n hÃ¬nh hiá»‡n táº¡i

**Acceptance Criteria:**
- Hiá»ƒn thá»‹ 1 láº§n duy nháº¥t sau khi Ä‘Äƒng kÃ½
- CÃ³ thá»ƒ swipe hoáº·c click next
- Click "Báº¯t Ä‘áº§u" â†’ Chuyá»ƒn sang Initial Setup

### 2.2. Initial Setup
**MÃ´ táº£:** Thiáº¿t láº­p ban Ä‘áº§u cho tÃ i khoáº£n

**YÃªu cáº§u chá»©c nÄƒng:**
- **BÆ°á»›c 1:** Chá»n tiá»n tá»‡ chÃ­nh (VND, USD, EUR...)
- **BÆ°á»›c 2:** Nháº­p sá»‘ dÆ° ban Ä‘áº§u (optional, cÃ³ thá»ƒ Ä‘á»ƒ 0)
- **BÆ°á»›c 3:** Chá»n hoáº·c táº¡o cÃ¡c category thÆ°á»ng dÃ¹ng
  - Gá»£i Ã½ sáºµn cÃ¡c category phá»• biáº¿n (Ä‚n uá»‘ng, Äi láº¡i, Giáº£i trÃ­...)
  - NgÆ°á»i dÃ¹ng tick chá»n category cáº§n dÃ¹ng
  - CÃ³ thá»ƒ thÃªm custom category
- **BÆ°á»›c 4:** Äáº·t ngÃ¢n sÃ¡ch thÃ¡ng (optional, cÃ³ thá»ƒ bá» qua)

**Acceptance Criteria:**
- Cho phÃ©p bá» qua cÃ¡c bÆ°á»›c optional
- Dá»¯ liá»‡u setup Ä‘Æ°á»£c lÆ°u vÃ o profile
- HoÃ n thÃ nh setup â†’ Chuyá»ƒn vá» Home screen
- CÃ³ thá»ƒ quay láº¡i bÆ°á»›c trÆ°á»›c

---

## MODULE 3: TRANSACTION MANAGEMENT (Quáº£n lÃ½ giao dá»‹ch)

### 3.1. ThÃªm giao dá»‹ch (Floating "Add" Button)
**MÃ´ táº£:** Táº¡o giao dá»‹ch thu hoáº·c chi má»›i

**YÃªu cáº§u chá»©c nÄƒng:**
- Click Floating Add button â†’ Má»Ÿ bottom sheet hoáº·c modal
- Toggle chá»n loáº¡i: **Thu nháº­p (Income)** / **Chi tiÃªu (Expense)**
- Nháº­p sá»‘ tiá»n (Number keyboard, calculator style)
- Chá»n Category tá»« danh sÃ¡ch
- Nháº­p ghi chÃº/mÃ´ táº£ (optional, max 200 kÃ½ tá»±)
- Chá»n ngÃ y giao dá»‹ch (máº·c Ä‘á»‹nh: hÃ´m nay)
- Button "LÆ°u" Ä‘á»ƒ hoÃ n táº¥t

**Acceptance Criteria:**
- Sá»‘ tiá»n pháº£i lá»›n hÆ¡n 0
- Pháº£i chá»n category
- Default: Loáº¡i lÃ  "Chi tiÃªu", ngÃ y lÃ  hÃ´m nay
- LÆ°u thÃ nh cÃ´ng â†’ ThÃ´ng bÃ¡o toast "ÄÃ£ thÃªm giao dá»‹ch"
- Update balance vÃ  hiá»ƒn thá»‹ trong Home screen ngay láº­p tá»©c
- Náº¿u lÃ  Chi tiÃªu: Kiá»ƒm tra budget cá»§a category â†’ Cáº£nh bÃ¡o náº¿u sáº¯p Ä‘áº¡t ngÆ°á»¡ng

### 3.2. Xem danh sÃ¡ch giao dá»‹ch
**MÃ´ táº£:** Hiá»ƒn thá»‹ lá»‹ch sá»­ cÃ¡c giao dá»‹ch Ä‘Ã£ táº¡o

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ á»Ÿ Home screen
- Group theo ngÃ y (Today, Yesterday, 2 days ago...)
- Má»—i item hiá»ƒn thá»‹:
  - Icon vÃ  mÃ u cá»§a category
  - TÃªn category
  - Ghi chÃº (náº¿u cÃ³)
  - Sá»‘ tiá»n (mÃ u Ä‘á» cho chi, xanh cho thu)
  - Thá»i gian
- Sáº¯p xáº¿p má»›i nháº¥t lÃªn Ä‘áº§u
- Infinite scroll hoáº·c pagination

**Acceptance Criteria:**
- Load nhanh (< 1s cho 50 items)
- Pull-to-refresh Ä‘á»ƒ cáº­p nháº­t
- Hiá»ƒn thá»‹ empty state náº¿u chÆ°a cÃ³ giao dá»‹ch
- Click vÃ o item â†’ Xem chi tiáº¿t vÃ  cÃ³ option Sá»­a/XÃ³a

### 3.3. Xem chi tiáº¿t giao dá»‹ch
**MÃ´ táº£:** Xem Ä‘áº§y Ä‘á»§ thÃ´ng tin cá»§a 1 giao dá»‹ch

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§:
  - Loáº¡i giao dá»‹ch (Thu/Chi)
  - Sá»‘ tiá»n
  - Category
  - Ghi chÃº
  - NgÃ y giá» táº¡o
- Button "Sá»­a" vÃ  "XÃ³a"

**Acceptance Criteria:**
- Hiá»ƒn thá»‹ trÃªn modal hoáº·c full screen
- CÃ³ button back/close

### 3.4. Sá»­a giao dá»‹ch
**MÃ´ táº£:** Chá»‰nh sá»­a thÃ´ng tin giao dá»‹ch Ä‘Ã£ táº¡o

**YÃªu cáº§u chá»©c nÄƒng:**
- Cho phÃ©p sá»­a táº¥t cáº£ cÃ¡c trÆ°á»ng
- Pre-fill dá»¯ liá»‡u hiá»‡n táº¡i
- Validate giá»‘ng nhÆ° khi thÃªm má»›i

**Acceptance Criteria:**
- Balance Ä‘Æ°á»£c tÃ­nh toÃ¡n láº¡i chÃ­nh xÃ¡c
- Náº¿u thay Ä‘á»•i category hoáº·c sá»‘ tiá»n cá»§a chi tiÃªu â†’ Kiá»ƒm tra láº¡i budget
- LÆ°u thÃ nh cÃ´ng â†’ Cáº­p nháº­t trong danh sÃ¡ch

### 3.5. XÃ³a giao dá»‹ch
**MÃ´ táº£:** XÃ³a giao dá»‹ch khÃ´ng cáº§n thiáº¿t

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ dialog xÃ¡c nháº­n "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a?"
- Button "Há»§y" vÃ  "XÃ³a"

**Acceptance Criteria:**
- Balance Ä‘Æ°á»£c cáº­p nháº­t láº¡i (cá»™ng láº¡i sá»‘ tiá»n chi, trá»« Ä‘i sá»‘ tiá»n thu)
- XÃ³a khá»i danh sÃ¡ch ngay láº­p tá»©c
- KhÃ´ng thá»ƒ khÃ´i phá»¥c (hoáº·c cÃ³ undo trong 5 giÃ¢y - optional)

### 3.6. Lá»c vÃ  tÃ¬m kiáº¿m giao dá»‹ch
**MÃ´ táº£:** TÃ¬m kiáº¿m giao dá»‹ch theo tiÃªu chÃ­

**YÃªu cáº§u chá»©c nÄƒng:**
- Search bar á»Ÿ Home screen
- Filter options:
  - Theo loáº¡i: Táº¥t cáº£ / Thu / Chi
  - Theo category: Chá»n nhiá»u category
  - Theo khoáº£ng thá»i gian: Tuáº§n nÃ y / ThÃ¡ng nÃ y / ThÃ¡ng trÆ°á»›c / Custom range
  - Theo sá»‘ tiá»n: Tá»« ... Ä‘áº¿n ...
- Button "Ãp dá»¥ng" vÃ  "Reset filter"

**Acceptance Criteria:**
- Káº¿t quáº£ hiá»ƒn thá»‹ real-time khi nháº­p search
- Filter káº¿t há»£p Ä‘Æ°á»£c vá»›i search
- CÃ³ thá»ƒ clear filter dá»… dÃ ng
- Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng káº¿t quáº£ tÃ¬m tháº¥y

---

## MODULE 4: CATEGORY MANAGEMENT (Quáº£n lÃ½ danh má»¥c)

### 4.1. Danh má»¥c máº·c Ä‘á»‹nh cá»§a há»‡ thá»‘ng
**MÃ´ táº£:** Há»‡ thá»‘ng cung cáº¥p sáºµn cÃ¡c category phá»• biáº¿n

**Category Thu nháº­p (Income):**
- ğŸ’° LÆ°Æ¡ng
- ğŸ ThÆ°á»Ÿng
- ğŸ“ˆ Äáº§u tÆ°
- ğŸ’¼ CÃ´ng viá»‡c thÃªm
- ğŸ¯ Thu nháº­p khÃ¡c

**Category Chi tiÃªu (Expense):**
- ğŸ” Ä‚n uá»‘ng
- ğŸš— Äi láº¡i
- ğŸ›’ Mua sáº¯m
- ğŸ® Giáº£i trÃ­
- ğŸ’Š Sá»©c khá»e
- ğŸ  NhÃ  cá»­a
- ğŸ“š GiÃ¡o dá»¥c
- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Gia Ä‘Ã¬nh
- ğŸ“± HÃ³a Ä‘Æ¡n & Dá»‹ch vá»¥
- ğŸ’‡ ChÄƒm sÃ³c cÃ¡ nhÃ¢n
- ğŸ QuÃ  táº·ng
- ğŸ“¦ KhÃ¡c

**Acceptance Criteria:**
- NgÆ°á»i dÃ¹ng khÃ´ng thá»ƒ xÃ³a category máº·c Ä‘á»‹nh
- CÃ³ thá»ƒ sá»­a tÃªn vÃ  icon cá»§a category máº·c Ä‘á»‹nh
- Má»—i category cÃ³ icon vÃ  mÃ u riÃªng biá»‡t

### 4.2. Táº¡o category má»›i
**MÃ´ táº£:** NgÆ°á»i dÃ¹ng táº¡o category tÃ¹y chá»‰nh

**YÃªu cáº§u chá»©c nÄƒng:**
- Truy cáº­p tá»«: Profile â†’ "Quáº£n lÃ½ danh má»¥c" â†’ Button "ThÃªm danh má»¥c"
- Chá»n loáº¡i: Thu nháº­p / Chi tiÃªu
- Nháº­p tÃªn category (max 30 kÃ½ tá»±)
- Chá»n icon tá»« thÆ° viá»‡n icon cÃ³ sáºµn
- Chá»n mÃ u (tá»« palette mÃ u cÃ³ sáºµn)

**Acceptance Criteria:**
- TÃªn khÃ´ng Ä‘Æ°á»£c trÃ¹ng vá»›i category Ä‘Ã£ cÃ³ (trong cÃ¹ng loáº¡i)
- TÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng
- Táº¡o thÃ nh cÃ´ng â†’ ThÃªm vÃ o danh sÃ¡ch category
- Category má»›i cÃ³ thá»ƒ dÃ¹ng ngay khi thÃªm giao dá»‹ch

### 4.3. Sá»­a category
**MÃ´ táº£:** Chá»‰nh sá»­a thÃ´ng tin category

**YÃªu cáº§u chá»©c nÄƒng:**
- Sá»­a tÃªn, icon, mÃ u sáº¯c
- KhÃ´ng Ä‘Æ°á»£c Ä‘á»•i loáº¡i (Thu/Chi)

**Acceptance Criteria:**
- TÃªn má»›i khÃ´ng trÃ¹ng vá»›i category khÃ¡c
- CÃ¡c giao dá»‹ch liÃªn quan Ä‘Æ°á»£c cáº­p nháº­t icon/mÃ u má»›i
- LÆ°u thÃ nh cÃ´ng â†’ Quay vá» danh sÃ¡ch category

### 4.4. XÃ³a category
**MÃ´ táº£:** XÃ³a category khÃ´ng cÃ²n dÃ¹ng

**YÃªu cáº§u chá»©c nÄƒng:**
- Chá»‰ xÃ³a Ä‘Æ°á»£c category do ngÆ°á»i dÃ¹ng táº¡o
- Kiá»ƒm tra xem cÃ³ giao dá»‹ch nÃ o dÃ¹ng category nÃ y khÃ´ng
- Náº¿u cÃ³ giao dá»‹ch: YÃªu cáº§u chá»n category thay tháº¿ trÆ°á»›c khi xÃ³a
- Náº¿u khÃ´ng cÃ³ giao dá»‹ch: XÃ³a trá»±c tiáº¿p

**Acceptance Criteria:**
- Hiá»ƒn thá»‹ dialog cáº£nh bÃ¡o trÆ°á»›c khi xÃ³a
- Náº¿u cÃ³ giao dá»‹ch: Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng vÃ  yÃªu cáº§u migrate
- XÃ³a thÃ nh cÃ´ng â†’ XÃ³a khá»i danh sÃ¡ch
- CÃ¡c giao dá»‹ch Ä‘Æ°á»£c chuyá»ƒn sang category má»›i

### 4.5. Xem danh sÃ¡ch category
**MÃ´ táº£:** Hiá»ƒn thá»‹ táº¥t cáº£ category

**YÃªu cáº§u chá»©c nÄƒng:**
- Truy cáº­p tá»« Profile â†’ "Quáº£n lÃ½ danh má»¥c"
- Group theo 2 tab: Thu nháº­p / Chi tiÃªu
- Má»—i category hiá»ƒn thá»‹:
  - Icon vÃ  mÃ u
  - TÃªn
  - Sá»‘ lÆ°á»£ng giao dá»‹ch (optional)
  - Tá»•ng sá»‘ tiá»n (optional)
- Button "ThÃªm category" á»Ÿ cuá»‘i danh sÃ¡ch

**Acceptance Criteria:**
- Load nhanh
- Click vÃ o item â†’ Xem chi tiáº¿t vÃ  option Sá»­a/XÃ³a
- Category máº·c Ä‘á»‹nh cÃ³ badge "Máº·c Ä‘á»‹nh"

---

## MODULE 5: BUDGET MANAGEMENT (Tab "Budget")

### 5.1. Táº¡o budget cho category chi tiÃªu
**MÃ´ táº£:** Äáº·t giá»›i háº¡n chi tiÃªu cho tá»«ng category

**YÃªu cáº§u chá»©c nÄƒng:**
- Truy cáº­p tá»« tab Budget â†’ Button "ThÃªm ngÃ¢n sÃ¡ch"
- Chá»n category chi tiÃªu (chá»‰ hiá»ƒn thá»‹ category chÆ°a cÃ³ budget)
- Nháº­p sá»‘ tiá»n ngÃ¢n sÃ¡ch
- Chá»n chu ká»³: **ThÃ¡ng nÃ y** (máº·c Ä‘á»‹nh) / ThÃ¡ng / QuÃ½ / NÄƒm
- Optional: Báº­t cáº£nh bÃ¡o khi Ä‘áº¡t % ngÆ°á»¡ng (70%, 80%, 90%)

**Acceptance Criteria:**
- Sá»‘ tiá»n budget pháº£i > 0
- Má»™t category chá»‰ cÃ³ 1 budget trong 1 chu ká»³
- LÆ°u thÃ nh cÃ´ng â†’ Hiá»ƒn thá»‹ trong Budget screen
- Tá»± Ä‘á»™ng reset khi háº¿t chu ká»³ (sang thÃ¡ng má»›i)

### 5.2. Hiá»ƒn thá»‹ danh sÃ¡ch budget (Budget Screen)
**MÃ´ táº£:** Xem tá»•ng quan cÃ¡c budget Ä‘ang tracking

**YÃªu cáº§u chá»©c nÄƒng:**
- Tab Budget lÃ  screen chÃ­nh
- Hiá»ƒn thá»‹ á»Ÿ Ä‘áº§u:
  - **Tá»•ng ngÃ¢n sÃ¡ch thÃ¡ng nÃ y**: Tá»•ng budget cá»§a táº¥t cáº£ category
  - **ÄÃ£ chi**: Tá»•ng chi tiÃªu thá»±c táº¿
  - **CÃ²n láº¡i**: Budget - Chi tiÃªu
  - Progress bar tá»•ng
- Danh sÃ¡ch cÃ¡c category cÃ³ budget:
  - Icon vÃ  tÃªn category
  - Progress bar (ÄÃ£ chi / Budget)
  - Sá»‘ tiá»n Ä‘Ã£ chi / Budget
  - % Ä‘Ã£ sá»­ dá»¥ng
  - MÃ u progress bar:
    - Xanh: < 70%
    - VÃ ng: 70-89%
    - Äá»: â‰¥ 90%
- Sáº¯p xáº¿p: Category vÆ°á»£t ngÃ¢n sÃ¡ch lÃªn Ä‘áº§u
- Button "ThÃªm ngÃ¢n sÃ¡ch"

**Acceptance Criteria:**
- Cáº­p nháº­t real-time khi cÃ³ giao dá»‹ch chi tiÃªu má»›i
- Pull-to-refresh
- Hiá»ƒn thá»‹ empty state náº¿u chÆ°a cÃ³ budget nÃ o
- Click vÃ o category â†’ Xem chi tiáº¿t budget

### 5.3. Xem chi tiáº¿t budget cá»§a category
**MÃ´ táº£:** Xem chi tiáº¿t budget vÃ  cÃ¡c giao dá»‹ch liÃªn quan

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹:
  - TÃªn category vÃ  icon
  - Budget amount
  - Sá»‘ tiá»n Ä‘Ã£ chi
  - Sá»‘ tiá»n cÃ²n láº¡i
  - % Ä‘Ã£ dÃ¹ng
  - Chu ká»³ (ThÃ¡ng X/2025)
  - Progress bar lá»›n
- **Danh sÃ¡ch giao dá»‹ch** thuá»™c category nÃ y trong chu ká»³ hiá»‡n táº¡i
  - Sáº¯p xáº¿p má»›i nháº¥t lÃªn Ä‘áº§u
  - Click vÃ o giao dá»‹ch â†’ Xem chi tiáº¿t/Sá»­a/XÃ³a
- Button "Sá»­a ngÃ¢n sÃ¡ch" vÃ  "XÃ³a ngÃ¢n sÃ¡ch"

**Acceptance Criteria:**
- Sá»‘ liá»‡u chÃ­nh xÃ¡c
- Danh sÃ¡ch giao dá»‹ch chá»‰ trong chu ká»³ budget
- Easy navigation vá» Budget screen

### 5.4. Sá»­a budget
**MÃ´ táº£:** Thay Ä‘á»•i sá»‘ tiá»n budget

**YÃªu cáº§u chá»©c nÄƒng:**
- Cho phÃ©p sá»­a sá»‘ tiá»n budget
- CÃ³ thá»ƒ thay Ä‘á»•i chu ká»³ (náº¿u cáº§n)
- CÃ³ thá»ƒ báº­t/táº¯t cáº£nh bÃ¡o

**Acceptance Criteria:**
- Sá»‘ tiá»n má»›i > 0
- LÆ°u thÃ nh cÃ´ng â†’ Cáº­p nháº­t ngay trong Budget screen
- Progress bar Ä‘Æ°á»£c tÃ­nh toÃ¡n láº¡i

### 5.5. XÃ³a budget
**MÃ´ táº£:** XÃ³a budget khÃ´ng cÃ²n tracking

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ dialog xÃ¡c nháº­n
- XÃ¡c nháº­n â†’ XÃ³a budget
- CÃ¡c giao dá»‹ch váº«n giá»¯ nguyÃªn, chá»‰ xÃ³a budget setting

**Acceptance Criteria:**
- XÃ³a khá»i danh sÃ¡ch Budget screen
- KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n dá»¯ liá»‡u giao dá»‹ch

### 5.6. Cáº£nh bÃ¡o vÆ°á»£t ngÃ¢n sÃ¡ch
**MÃ´ táº£:** ThÃ´ng bÃ¡o khi chi tiÃªu gáº§n Ä‘áº¡t hoáº·c vÆ°á»£t budget

**YÃªu cáº§u chá»©c nÄƒng:**
- Khi thÃªm giao dá»‹ch chi tiÃªu:
  - Náº¿u category cÃ³ budget â†’ Kiá»ƒm tra % Ä‘Ã£ dÃ¹ng
  - Náº¿u Ä‘áº¡t ngÆ°á»¡ng cáº£nh bÃ¡o (70%, 80%, 90%) â†’ Hiá»ƒn thá»‹ alert/notification
  - Náº¿u vÆ°á»£t 100% â†’ Cáº£nh bÃ¡o Ä‘áº­m "Báº¡n Ä‘Ã£ vÆ°á»£t ngÃ¢n sÃ¡ch!"
- In-app notification:
  - Icon mÃ u Ä‘á» trÃªn Budget tab khi cÃ³ category vÆ°á»£t budget
  - Badge sá»‘ lÆ°á»£ng category vÆ°á»£t budget

**Acceptance Criteria:**
- Cáº£nh bÃ¡o hiá»ƒn thá»‹ ngay khi thÃªm giao dá»‹ch
- CÃ³ option "KhÃ´ng hiá»ƒn thá»‹ láº¡i" cho tá»«ng category
- Cáº£nh bÃ¡o khÃ´ng lÃ m giÃ¡n Ä‘oáº¡n quÃ¡ trÃ¬nh thÃªm giao dá»‹ch

---

## MODULE 6: SAVING GOALS (Má»¥c tiÃªu tiáº¿t kiá»‡m)

### 6.1. Hiá»ƒn thá»‹ Net Balance
**MÃ´ táº£:** TÃ­nh vÃ  hiá»ƒn thá»‹ sá»‘ dÆ° rÃ²ng - ÄÃ¢y lÃ  sá»‘ tiá»n thá»±c táº¿ cÃ²n láº¡i sau khi trá»« chi tiÃªu

**CÃ´ng thá»©c:**
```
Net Balance = Tá»•ng Thu nháº­p (Income) - Tá»•ng Chi tiÃªu (Expense)
```

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹ á»Ÿ Home screen (top card):
  - **Current Balance**: Net balance hiá»‡n táº¡i (tá»•ng táº¥t cáº£ thu - tá»•ng táº¥t cáº£ chi tá»« trÆ°á»›c Ä‘áº¿n nay)
  - **Income thÃ¡ng nÃ y**: Tá»•ng thu thÃ¡ng nÃ y
  - **Expense thÃ¡ng nÃ y**: Tá»•ng chi thÃ¡ng nÃ y
  - **Net This Month**: Thu - Chi cá»§a thÃ¡ng nÃ y
- Cáº­p nháº­t real-time khi cÃ³ giao dá»‹ch
- MÃ u sáº¯c:
  - Xanh náº¿u Balance > 0
  - Äá» náº¿u Balance < 0

**Acceptance Criteria:**
- TÃ­nh toÃ¡n chÃ­nh xÃ¡c 100%
- Net Balance lÃ  sá»‘ tiá»n tÃ­ch lÅ©y tá»« táº¥t cáº£ giao dá»‹ch
- Responsive vá»›i cÃ¡c giao dá»‹ch thÃªm/sá»­a/xÃ³a
- ÄÃ¢y chÃ­nh lÃ  sá»‘ tiá»n cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ phÃ¢n bá»• cho cÃ¡c Saving Goal

### 6.2. Táº¡o Saving Goal
**MÃ´ táº£:** Táº¡o má»¥c tiÃªu tiáº¿t kiá»‡m Ä‘á»ƒ theo dÃµi viá»‡c dÃ nh dá»¥m tá»« Net Balance

**Concept:**
- Saving Goal lÃ  má»¥c tiÃªu tiáº¿t kiá»‡m mÃ  ngÆ°á»i dÃ¹ng muá»‘n Ä‘áº¡t Ä‘Æ°á»£c (VD: Mua laptop, Du lá»‹ch...)
- Tiáº¿n Ä‘á»™ Goal Ä‘Æ°á»£c tracking dá»±a trÃªn **Net Balance tÃ­ch lÅ©y** tá»« ngÃ y báº¯t Ä‘áº§u goal
- CÃ´ng thá»©c: `Tiá»n Ä‘Ã£ tiáº¿t kiá»‡m cho Goal = (Tá»•ng Income - Tá»•ng Expense) tá»« Start Date Ä‘áº¿n hiá»‡n táº¡i`

**YÃªu cáº§u chá»©c nÄƒng:**
- Truy cáº­p tá»«: Profile â†’ "Má»¥c tiÃªu tiáº¿t kiá»‡m" â†’ Button "ThÃªm má»¥c tiÃªu"
- Nháº­p tÃªn má»¥c tiÃªu (VD: "Mua laptop", "Du lá»‹ch ÄÃ  Láº¡t")
- Nháº­p sá»‘ tiá»n má»¥c tiÃªu
- Chá»n ngÃ y báº¯t Ä‘áº§u (default: hÃ´m nay)
- Chá»n ngÃ y Ä‘áº¡t má»¥c tiÃªu (target date)
- Chá»n icon vÃ  mÃ u (optional)
- ThÃªm ghi chÃº (optional)

**TÃ­nh toÃ¡n tá»± Ä‘á»™ng:**
- Sá»‘ thÃ¡ng cÃ²n láº¡i = (Target date - Start date) / 30
- Cáº§n tiáº¿t kiá»‡m má»—i thÃ¡ng = Sá»‘ tiá»n má»¥c tiÃªu / Sá»‘ thÃ¡ng
- Hiá»ƒn thá»‹ gá»£i Ã½: "Báº¡n cáº§n Net Balance dÆ°Æ¡ng X VND/thÃ¡ng Ä‘á»ƒ Ä‘áº¡t má»¥c tiÃªu"

**Acceptance Criteria:**
- Sá»‘ tiá»n má»¥c tiÃªu > 0
- Target date pháº£i sau Start date
- Táº¡o thÃ nh cÃ´ng â†’ ThÃªm vÃ o danh sÃ¡ch goal
- Hiá»ƒn thá»‹ gá»£i Ã½ rÃµ rÃ ng vá» sá»‘ tiá»n cáº§n tiáº¿t kiá»‡m
- Giáº£i thÃ­ch: "Tiáº¿n Ä‘á»™ sáº½ Ä‘Æ°á»£c tÃ­nh tá»« Net Balance tÃ­ch lÅ©y tá»« ngÃ y báº¯t Ä‘áº§u"

### 6.3. Xem danh sÃ¡ch Saving Goals
**MÃ´ táº£:** Hiá»ƒn thá»‹ táº¥t cáº£ má»¥c tiÃªu Ä‘ang theo dÃµi vá»›i tiáº¿n Ä‘á»™ real-time

**YÃªu cáº§u chá»©c nÄƒng:**
- Truy cáº­p tá»« Profile â†’ "Má»¥c tiÃªu tiáº¿t kiá»‡m"
- Má»—i goal hiá»ƒn thá»‹:
  - Icon vÃ  tÃªn má»¥c tiÃªu
  - Progress bar (ÄÃ£ tiáº¿t kiá»‡m / Má»¥c tiÃªu)
  - Sá»‘ tiá»n Ä‘Ã£ tiáº¿t kiá»‡m / Má»¥c tiÃªu
  - % hoÃ n thÃ nh
  - Thá»i gian cÃ²n láº¡i (X thÃ¡ng Y ngÃ y)
- Sáº¯p xáº¿p: Gáº§n Ä‘áº¡t má»¥c tiÃªu lÃªn Ä‘áº§u
- Button "ThÃªm má»¥c tiÃªu"

**CÃ¡ch tÃ­nh "ÄÃ£ tiáº¿t kiá»‡m":**
```
ÄÃ£ tiáº¿t kiá»‡m cho Goal = Net Balance tÃ­ch lÅ©y tá»« Start Date Ä‘áº¿n hiá»‡n táº¡i
                      = (Tá»•ng Income - Tá»•ng Expense) trong khoáº£ng thá»i gian Ä‘Ã³
```

**VÃ­ dá»¥:**
- Goal "Mua laptop 20 triá»‡u" báº¯t Ä‘áº§u ngÃ y 1/1/2025
- Tá»« 1/1 Ä‘áº¿n nay:
  - Tá»•ng thu: 30 triá»‡u
  - Tá»•ng chi: 18 triá»‡u
  - Net Balance tÃ­ch lÅ©y: 30 - 18 = 12 triá»‡u
  - â†’ Tiáº¿n Ä‘á»™ Goal: 12/20 triá»‡u = 60%

**Acceptance Criteria:**
- Cáº­p nháº­t tiáº¿n Ä‘á»™ tá»± Ä‘á»™ng má»—i khi cÃ³ giao dá»‹ch thu/chi má»›i
- Chá»‰ tÃ­nh cÃ¡c giao dá»‹ch tá»« Start Date trá»Ÿ Ä‘i
- Highlight goal Ä‘Ã£ hoÃ n thÃ nh (â‰¥ 100%)
- Empty state náº¿u chÆ°a cÃ³ goal nÃ o
- Tooltip giáº£i thÃ­ch: "Tiáº¿n Ä‘á»™ = (Thu - Chi) tá»« ngÃ y báº¯t Ä‘áº§u má»¥c tiÃªu"

### 6.4. Xem chi tiáº¿t Saving Goal
**MÃ´ táº£:** Xem chi tiáº¿t tiáº¿n Ä‘á»™, phÃ¢n tÃ­ch vÃ  Ä‘á» xuáº¥t

**YÃªu cáº§u chá»©c nÄƒng:**
- Hiá»ƒn thá»‹:
  - TÃªn vÃ  icon má»¥c tiÃªu
  - Sá»‘ tiá»n má»¥c tiÃªu
  - Sá»‘ tiá»n Ä‘Ã£ tiáº¿t kiá»‡m (Net Balance tÃ­ch lÅ©y tá»« Start Date)
  - Sá»‘ tiá»n cÃ²n thiáº¿u
  - % hoÃ n thÃ nh
  - Progress bar lá»›n
  - NgÃ y báº¯t Ä‘áº§u vÃ  ngÃ y káº¿t thÃºc
  - Thá»i gian cÃ²n láº¡i
  
- **PhÃ¢n tÃ­ch chi tiáº¿t:**
  - **Káº¿ hoáº¡ch:** Cáº§n tiáº¿t kiá»‡m X VND/thÃ¡ng (target amount / sá»‘ thÃ¡ng)
  - **Thá»±c táº¿:** Äang tiáº¿t kiá»‡m Y VND/thÃ¡ng (Net Balance tÃ­ch lÅ©y / sá»‘ thÃ¡ng Ä‘Ã£ qua)
  - **ÄÃ¡nh giÃ¡:** 
    - Náº¿u Y â‰¥ X: "âœ… Báº¡n Ä‘ang on track! Tiáº¿p tá»¥c phÃ¡t huy!"
    - Náº¿u Y < X: "âš ï¸ Cáº§n tÄƒng tá»‘c! Thiáº¿u Z VND/thÃ¡ng so vá»›i káº¿ hoáº¡ch"
  
- **Biá»ƒu Ä‘á»“ tiáº¿n Ä‘á»™** theo thÃ¡ng (Line chart)
  - ÄÆ°á»ng káº¿ hoáº¡ch (tÄƒng tuyáº¿n tÃ­nh tá»« 0 Ä‘áº¿n target)
  - ÄÆ°á»ng thá»±c táº¿ (Net Balance tÃ­ch lÅ©y theo thá»i gian)
  - So sÃ¡nh trá»±c quan giá»¯a káº¿ hoáº¡ch vÃ  thá»±c táº¿

- **Chi tiáº¿t thu chi trong thá»i gian Goal:**
  - Tá»•ng thu tá»« Start Date
  - Tá»•ng chi tá»« Start Date
  - Average net balance/thÃ¡ng
  
- Button "Sá»­a" vÃ  "XÃ³a"

**Acceptance Criteria:**
- PhÃ¢n tÃ­ch chÃ­nh xÃ¡c dá»±a trÃªn Net Balance thá»±c táº¿
- Biá»ƒu Ä‘á»“ cáº­p nháº­t real-time
- Feedback rÃµ rÃ ng, Ä‘á»™ng viÃªn ngÆ°á»i dÃ¹ng
- GiÃºp ngÆ°á»i dÃ¹ng hiá»ƒu rÃµ há» Ä‘ang tiáº¿t kiá»‡m nhÆ° tháº¿ nÃ o

### 6.5. Sá»­a Saving Goal
**MÃ´ táº£:** Chá»‰nh sá»­a thÃ´ng tin má»¥c tiÃªu

**YÃªu cáº§u chá»©c nÄƒng:**
- Cho phÃ©p sá»­a: TÃªn, sá»‘ tiá»n má»¥c tiÃªu, target date, icon, mÃ u, ghi chÃº
- KhÃ´ng Ä‘á»•i start date (Ä‘á»ƒ giá»¯ tÃ­nh toÃ n váº¹n dá»¯ liá»‡u)
- TÃ­nh toÃ¡n láº¡i cÃ¡c chá»‰ sá»‘ khi thay Ä‘á»•i

**Acceptance Criteria:**
- Validate giá»‘ng nhÆ° khi táº¡o má»›i
- LÆ°u thÃ nh cÃ´ng â†’ Cáº­p nháº­t trong danh sÃ¡ch

### 6.6. XÃ³a Saving Goal
**MÃ´ táº£:** XÃ³a má»¥c tiÃªu khÃ´ng cÃ²n theo dÃµi

**YÃªu cáº§u chá»©c nÄƒng:**
- Dialog xÃ¡c nháº­n "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a má»¥c tiÃªu nÃ y?"
- XÃ¡c nháº­n â†’ XÃ³a goal
- KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n giao dá»‹ch

**Acceptance Criteria:**
- XÃ³a khá»i danh sÃ¡ch ngay láº­p tá»©c

### 6.7. ÄÃ¡nh dáº¥u Goal hoÃ n thÃ nh
**MÃ´ táº£:** ÄÃ¡nh dáº¥u má»¥c tiÃªu Ä‘Ã£ Ä‘áº¡t Ä‘Æ°á»£c

**YÃªu cáº§u chá»©c nÄƒng:**
- Tá»± Ä‘á»™ng: Khi % â‰¥ 100% â†’ Badge "HoÃ n thÃ nh" mÃ u vÃ ng
- Thá»§ cÃ´ng: Button "ÄÃ¡nh dáº¥u hoÃ n thÃ nh" trong chi tiáº¿t goal
- Goal hoÃ n thÃ nh:
  - Hiá»ƒn thá»‹ badge "Completed"
  - Chuyá»ƒn xuá»‘ng cuá»‘i danh sÃ¡ch hoáº·c tab riÃªng
  - CÃ³ option "LÆ°u trá»¯" (áº©n khá»i danh sÃ¡ch chÃ­nh)

**Acceptance Criteria:**
- Celebration animation khi Ä‘áº¡t 100%
- CÃ³ thá»ƒ bá» Ä‘Ã¡nh dáº¥u hoÃ n thÃ nh (reopen goal)

---

## MODULE 7: ANALYSIS & REPORTS (Tab "Analysis")

### 7.1. Tá»•ng quan (Analysis Home)
**MÃ´ táº£:** Dashboard phÃ¢n tÃ­ch tÃ i chÃ­nh

**YÃªu cáº§u chá»©c nÄƒng:**
- Chá»n khoáº£ng thá»i gian á»Ÿ Ä‘áº§u trang:
  - Tuáº§n nÃ y / ThÃ¡ng nÃ y / 3 thÃ¡ng / 6 thÃ¡ng / NÄƒm nay / Custom
- **Section 1: Income vs Expense**
  - Biá»ƒu Ä‘á»“ cá»™t so sÃ¡nh Thu vÃ  Chi theo thá»i gian (ngÃ y/tuáº§n/thÃ¡ng)
  - Hiá»ƒn thá»‹ Net Balance
  - TÄƒng/giáº£m % so vá»›i ká»³ trÆ°á»›c
- **Section 2: Expense by Category**
  - Biá»ƒu Ä‘á»“ trÃ²n (Pie chart) phÃ¢n bá»‘ chi tiÃªu theo category
  - Hiá»ƒn thá»‹ % vÃ  sá»‘ tiá»n cá»§a top 5 category
  - Button "Xem chi tiáº¿t" â†’ Expense Breakdown
- **Section 3: Spending Trend**
  - Biá»ƒu Ä‘á»“ Ä‘Æ°á»ng xu hÆ°á»›ng chi tiÃªu theo thá»i gian
  - So sÃ¡nh vá»›i thÃ¡ng trÆ°á»›c

**Acceptance Criteria:**
- Biá»ƒu Ä‘á»“ táº£i nhanh (< 2s)
- Interactive: Click vÃ o biá»ƒu Ä‘á»“ Ä‘á»ƒ xem chi tiáº¿t
- Responsive vá»›i má»i khoáº£ng thá»i gian

### 7.2. Chi tiáº¿t chi tiÃªu theo Category
**MÃ´ táº£:** PhÃ¢n tÃ­ch sÃ¢u chi tiÃªu cá»§a tá»«ng category

**YÃªu cáº§u chá»©c nÄƒng:**
- Danh sÃ¡ch táº¥t cáº£ category chi tiÃªu
- Má»—i category hiá»ƒn thá»‹:
  - Icon vÃ  tÃªn
  - Tá»•ng chi trong ká»³
  - % so vá»›i tá»•ng chi tiÃªu
  - Sá»‘ lÆ°á»£ng giao dá»‹ch
  - So sÃ¡nh vá»›i ká»³ trÆ°á»›c (tÄƒng/giáº£m %)
- Sáº¯p xáº¿p theo sá»‘ tiá»n giáº£m dáº§n
- Click vÃ o category â†’ Xem danh sÃ¡ch giao dá»‹ch cá»§a category Ä‘Ã³

**Acceptance Criteria:**
- TÃ­nh toÃ¡n chÃ­nh xÃ¡c
- CÃ³ thá»ƒ filter theo khoáº£ng thá»i gian

### 7.3. So sÃ¡nh thu chi theo thá»i gian
**MÃ´ táº£:** So sÃ¡nh thu chi giá»¯a cÃ¡c ká»³

**YÃªu cáº§u chá»©c nÄƒng:**
- Chá»n 2 khoáº£ng thá»i gian Ä‘á»ƒ so sÃ¡nh
- Hiá»ƒn thá»‹ báº£ng so sÃ¡nh:
  - Thu nháº­p: Ká»³ 1 vs Ká»³ 2 (chÃªnh lá»‡ch %)
  - Chi tiÃªu: Ká»³ 1 vs Ká»³ 2 (chÃªnh lá»‡ch %)
  - Net Balance: Ká»³ 1 vs Ká»³ 2
- So sÃ¡nh theo category:
  - Top category tÄƒng nhiá»u nháº¥t
  - Top category giáº£m nhiá»u nháº¥t

**Acceptance Criteria:**
- Dá»… dÃ ng Ä‘á»c vÃ  hiá»ƒu insights
- Highlight nhá»¯ng thay Ä‘á»•i Ä‘Ã¡ng chÃº Ã½

### 7.4. Xuáº¥t bÃ¡o cÃ¡o
**MÃ´ táº£:** Export dá»¯ liá»‡u ra file

**YÃªu cáº§u chá»©c nÄƒng:**
- Button "Xuáº¥t bÃ¡o cÃ¡o" á»Ÿ Analysis screen
- Chá»n khoáº£ng thá»i gian
- Chá»n Ä‘á»‹nh dáº¡ng: PDF / Excel (CSV)
- **Ná»™i dung bÃ¡o cÃ¡o:**
  - Tá»•ng quan thu chi
  - Chi tiáº¿t giao dá»‹ch
  - PhÃ¢n tÃ­ch theo category
  - Biá»ƒu Ä‘á»“ (náº¿u lÃ  PDF)
- LÆ°u vÃ o thiáº¿t bá»‹ hoáº·c share qua email/app khÃ¡c

**Acceptance Criteria:**
- File Ä‘áº§y Ä‘á»§, format Ä‘áº¹p
- CSV: Dá»… dÃ ng import vÃ o Excel/Google Sheets
- PDF: Layout chuyÃªn nghiá»‡p, cÃ³ logo app

---

## MODULE 8: PROFILE & SETTINGS (Tab "Profile")

### 8.1. ThÃ´ng tin cÃ¡ nhÃ¢n
**MÃ´ táº£:** Hiá»ƒn thá»‹ vÃ  chá»‰nh sá»­a profile

**YÃªu cáº§u chá»©c nÄƒng:**
- Avatar (cÃ³ thá»ƒ upload áº£nh hoáº·c chá»n tá»« thÆ° viá»‡n)
- TÃªn hiá»ƒn thá»‹
- Email (khÃ´ng thá»ƒ sá»­a)
- Button "Sá»­a há»“ sÆ¡"

**Acceptance Criteria:**
- Upload áº£nh: Max 5MB, format JPG/PNG
- TÃªn hiá»ƒn thá»‹: Max 50 kÃ½ tá»±
- LÆ°u thÃ nh cÃ´ng â†’ Cáº­p nháº­t trÃªn toÃ n app

### 8.2. CÃ i Ä‘áº·t á»©ng dá»¥ng
**MÃ´ táº£:** CÃ¡c thiáº¿t láº­p chung

**YÃªu cáº§u chá»©c nÄƒng:**
- **Tiá»n tá»‡:** Chá»n tiá»n tá»‡ máº·c Ä‘á»‹nh (VND, USD, EUR...)
- **NgÃ´n ngá»¯:** Tiáº¿ng Viá»‡t / English
- **Theme:** SÃ¡ng / Tá»‘i / Theo há»‡ thá»‘ng
- **Äá»‹nh dáº¡ng ngÃ y:** DD/MM/YYYY hoáº·c MM/DD/YYYY
- **Báº¯t Ä‘áº§u tuáº§n:** Chá»§ nháº­t / Thá»© hai
- **Báº¯t Ä‘áº§u thÃ¡ng:** NgÃ y 1 / NgÃ y X (cho ngÃ¢n sÃ¡ch)

**Acceptance Criteria:**
- Ãp dá»¥ng ngay láº­p tá»©c
- LÆ°u cÃ i Ä‘áº·t vÃ o local storage

### 8.3. ThÃ´ng bÃ¡o
**MÃ´ táº£:** Quáº£n lÃ½ thÃ´ng bÃ¡o

**YÃªu cáº§u chá»©c nÄƒng:**
- Toggle báº­t/táº¯t:
  - ThÃ´ng bÃ¡o chung
  - Cáº£nh bÃ¡o ngÃ¢n sÃ¡ch
  - Nháº¯c nhá»Ÿ má»¥c tiÃªu tiáº¿t kiá»‡m
  - Nháº¯c nhá»Ÿ giao dá»‹ch Ä‘á»‹nh ká»³ (náº¿u cÃ³ tÃ­nh nÄƒng nÃ y)
- Chá»n thá»i gian nháº­n thÃ´ng bÃ¡o (VD: 20:00 má»—i ngÃ y)

**Acceptance Criteria:**
- Táº¯t thÃ´ng bÃ¡o â†’ KhÃ´ng gá»­i notification
- Báº­t thÃ´ng bÃ¡o â†’ Request permission (iOS/Android)

### 8.4. Báº£o máº­t
**MÃ´ táº£:** CÃ i Ä‘áº·t báº£o máº­t tÃ i khoáº£n

**YÃªu cáº§u chá»©c nÄƒng:**
- **Äá»•i máº­t kháº©u:**
  - Nháº­p máº­t kháº©u cÅ©
  - Nháº­p máº­t kháº©u má»›i
  - XÃ¡c nháº­n máº­t kháº©u má»›i
- **KhÃ³a á»©ng dá»¥ng:**
  - Báº­t/táº¯t khÃ³a báº±ng PIN/Sinh tráº¯c há»c
  - Äáº·t PIN 4-6 sá»‘
  - Báº­t Face ID / Touch ID / Fingerprint
  - Chá»n thá»i gian khÃ³a (Ngay láº­p tá»©c / 1 phÃºt / 5 phÃºt)
- **ÄÄƒng xuáº¥t táº¥t cáº£ thiáº¿t bá»‹** (náº¿u cÃ³ Ä‘á»“ng bá»™)

**Acceptance Criteria:**
- Äá»•i máº­t kháº©u thÃ nh cÃ´ng â†’ ÄÄƒng xuáº¥t vÃ  yÃªu cáº§u Ä‘Äƒng nháº­p láº¡i
- KhÃ³a app hoáº¡t Ä‘á»™ng khi má»Ÿ app sau khi timeout
- Sinh tráº¯c há»c: Fallback vá» PIN náº¿u tháº¥t báº¡i

### 8.5. Sao lÆ°u & KhÃ´i phá»¥c
**MÃ´ táº£:** Backup vÃ  restore dá»¯ liá»‡u

**YÃªu cáº§u chá»©c nÄƒng:**
- **Sao lÆ°u tá»± Ä‘á»™ng:**
  - Báº­t/táº¯t auto backup
  - Chá»n táº§n suáº¥t: HÃ ng ngÃ y / HÃ ng tuáº§n
  - Backup lÃªn cloud (Google Drive / iCloud) hoáº·c local
- **Sao lÆ°u thá»§ cÃ´ng:**
  - Button "Sao lÆ°u ngay"
  - Tiáº¿n trÃ¬nh backup hiá»ƒn thá»‹ rÃµ rÃ ng
  - ThÃ´ng bÃ¡o "Sao lÆ°u thÃ nh cÃ´ng"
- **KhÃ´i phá»¥c:**
  - Chá»n file backup tá»« cloud hoáº·c local
  - Cáº£nh bÃ¡o: "Dá»¯ liá»‡u hiá»‡n táº¡i sáº½ bá»‹ ghi Ä‘Ã¨"
  - XÃ¡c nháº­n â†’ Restore
  - Loading â†’ ThÃ´ng bÃ¡o thÃ nh cÃ´ng â†’ Reload app

**Acceptance Criteria:**
- Backup bao gá»“m: Giao dá»‹ch, Category, Budget, Goals, Settings
- Backup Ä‘Æ°á»£c mÃ£ hÃ³a
- Restore chÃ­nh xÃ¡c 100%

### 8.6. Quáº£n lÃ½ danh má»¥c
**MÃ´ táº£:** Link tá»›i Category Management (Module 4)

**YÃªu cáº§u chá»©c nÄƒng:**
- Menu item "Quáº£n lÃ½ danh má»¥c" â†’ Navigate tá»›i Category screen

### 8.7. Má»¥c tiÃªu tiáº¿t kiá»‡m
**MÃ´ táº£:** Link tá»›i Saving Goals (Module 6)

**YÃªu cáº§u chá»©c nÄƒng:**
- Menu item "Má»¥c tiÃªu tiáº¿t kiá»‡m" â†’ Navigate tá»›i Saving Goals screen

### 8.8. Giá»›i thiá»‡u & Há»— trá»£
**MÃ´ táº£:** ThÃ´ng tin vÃ  há»— trá»£ ngÆ°á»i dÃ¹ng

**YÃªu cáº§u chá»©c nÄƒng:**
- **Vá» á»©ng dá»¥ng:**
  - TÃªn app, version, logo
  - MÃ´ táº£ ngáº¯n
- **HÆ°á»›ng dáº«n sá»­ dá»¥ng:**
  - Xem láº¡i Onboarding
  - FAQ / CÃ¢u há»i thÆ°á»ng gáº·p
- **LiÃªn há»‡ há»— trá»£:**
  - Email support
  - Social media links
- **ÄÃ¡nh giÃ¡ á»©ng dá»¥ng:**
  - Link tá»›i App Store / Google Play Ä‘á»ƒ review

**Acceptance Criteria:**
- Link hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c
- Email support cÃ³ sáºµn template

### 8.9. ChÃ­nh sÃ¡ch & Äiá»u khoáº£n
**MÃ´ táº£:** Hiá»ƒn thá»‹ cÃ¡c chÃ­nh sÃ¡ch

**YÃªu cáº§u chá»©c nÄƒng:**
- Äiá»u khoáº£n sá»­ dá»¥ng (Terms of Service)
- ChÃ­nh sÃ¡ch báº£o máº­t (Privacy Policy)
- Hiá»ƒn thá»‹ trÃªn web view hoáº·c PDF

**Acceptance Criteria:**
- Ná»™i dung Ä‘áº§y Ä‘á»§, dá»… Ä‘á»c

### 8.10. XÃ³a tÃ i khoáº£n
**MÃ´ táº£:** XÃ³a vÄ©nh viá»…n tÃ i khoáº£n vÃ  dá»¯ liá»‡u

**YÃªu cáº§u chá»©c nÄƒng:**
- Menu item "XÃ³a tÃ i khoáº£n" (mÃ u Ä‘á», á»Ÿ cuá»‘i cÃ¹ng)
- Click â†’ Dialog cáº£nh bÃ¡o nghiÃªm trá»ng:
  - "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a tÃ i khoáº£n?"
  - "ToÃ n bá»™ dá»¯ liá»‡u cá»§a báº¡n sáº½ bá»‹ xÃ³a vÄ©nh viá»…n vÃ  khÃ´ng thá»ƒ khÃ´i phá»¥c"
- YÃªu cáº§u nháº­p máº­t kháº©u Ä‘á»ƒ xÃ¡c nháº­n
- Button "Há»§y" (ná»•i báº­t) vÃ  "XÃ³a tÃ i khoáº£n" (mÃ u Ä‘á»)

**Acceptance Criteria:**
- XÃ³a táº¥t cáº£ dá»¯ liá»‡u ngÆ°á»i dÃ¹ng
- XÃ³a tÃ i khoáº£n khá»i há»‡ thá»‘ng
- Logout vÃ  vá» mÃ n hÃ¬nh Login

---

## 4. USER FLOW CHÃNH

### Flow 1: First Time User
```
Má»Ÿ app láº§n Ä‘áº§u
  â†’ ÄÄƒng kÃ½ tÃ i khoáº£n
  â†’ Onboarding (Welcome screens)
  â†’ Initial Setup (Tiá»n tá»‡, Sá»‘ dÆ°, Category, Budget)
  â†’ Home screen
  â†’ ThÃªm giao dá»‹ch Ä‘áº§u tiÃªn
```

### Flow 2: ThÃªm giao dá»‹ch
```
Home screen
  â†’ Click Floating "Add" button
  â†’ Chá»n loáº¡i (Thu/Chi)
  â†’ Nháº­p sá»‘ tiá»n
  â†’ Chá»n Category
  â†’ Nháº­p ghi chÃº (optional)
  â†’ Click "LÆ°u"
  â†’ ThÃ´ng bÃ¡o thÃ nh cÃ´ng
  â†’ Vá» Home screen (giao dá»‹ch hiá»ƒn thá»‹ ngay)
```

### Flow 3: Quáº£n lÃ½ ngÃ¢n sÃ¡ch
```
Tab Budget
  â†’ Click "ThÃªm ngÃ¢n sÃ¡ch"
  â†’ Chá»n category chi tiÃªu
  â†’ Nháº­p sá»‘ tiá»n budget
  â†’ LÆ°u
  â†’ Budget hiá»ƒn thá»‹ trong danh sÃ¡ch
  â†’ Khi thÃªm giao dá»‹ch chi â†’ Kiá»ƒm tra budget â†’ Cáº£nh bÃ¡o náº¿u cáº§n
```

### Flow 4: Táº¡o vÃ  theo dÃµi má»¥c tiÃªu tiáº¿t kiá»‡m
```
Profile â†’ Má»¥c tiÃªu tiáº¿t kiá»‡m
  â†’ Click "ThÃªm má»¥c tiÃªu"
  â†’ Nháº­p tÃªn: "Mua Macbook"
  â†’ Sá»‘ tiá»n: 30,000,000 VND
  â†’ Start date: 01/01/2025
  â†’ Target date: 01/06/2025 (6 thÃ¡ng)
  â†’ LÆ°u
  â†’ Há»‡ thá»‘ng tÃ­nh: Cáº§n tiáº¿t kiá»‡m 5,000,000/thÃ¡ng
  â†’ Goal hiá»ƒn thá»‹ trong danh sÃ¡ch

Theo dÃµi tiáº¿n Ä‘á»™:
  â†’ Giáº£ sá»­ Ä‘áº¿n 01/03/2025 (2 thÃ¡ng sau):
  â†’ Tá»•ng thu tá»« 01/01: 25,000,000
  â†’ Tá»•ng chi tá»« 01/01: 16,000,000  
  â†’ Net Balance tÃ­ch lÅ©y: 9,000,000
  â†’ Tiáº¿n Ä‘á»™ Goal: 9tr/30tr = 30%
  â†’ Thá»±c táº¿ tiáº¿t kiá»‡m: 4,500,000/thÃ¡ng
  â†’ ÄÃ¡nh giÃ¡: "Cáº§n tÄƒng tá»‘c! Thiáº¿u 500k/thÃ¡ng"
```

### Flow 5: Xem phÃ¢n tÃ­ch
```
Tab Analysis
  â†’ Chá»n khoáº£ng thá»i gian
  â†’ Xem biá»ƒu Ä‘á»“ thu chi
  â†’ Click vÃ o category trong pie chart
  â†’ Xem chi tiáº¿t giao dá»‹ch cá»§a category
  â†’ Quay láº¡i Analysis
  â†’ Export bÃ¡o cÃ¡o (náº¿u cáº§n)
```

---

## 5. YÃŠU Cáº¦U PHI CHá»¨C NÄ‚NG

### 5.1. Performance
- Thá»i gian má»Ÿ app < 2s
- Thá»i gian thÃªm giao dá»‹ch < 1s
- Biá»ƒu Ä‘á»“ render < 2s
- Há»— trá»£ offline mode (local database)
- Sync vá»›i server khi cÃ³ internet

### 5.2. Security
- MÃ£ hÃ³a dá»¯ liá»‡u nháº¡y cáº£m (máº­t kháº©u, giao dá»‹ch)
- HTTPS cho táº¥t cáº£ API
- Token-based authentication (JWT)
- Session timeout: 30 ngÃ y (remember me) hoáº·c 1 ngÃ y
- KhÃ³a app báº±ng PIN/Biometric

### 5.3. Usability
- Giao diá»‡n Ä‘Æ¡n giáº£n, trá»±c quan
- MÃ u sáº¯c phÃ¢n biá»‡t rÃµ rÃ ng (Thu: xanh, Chi: Ä‘á»)
- Feedback rÃµ rÃ ng cho má»i hÃ nh Ä‘á»™ng (toast, animation)
- Há»— trá»£ dark mode
- Font size Ä‘á»c dá»… dÃ ng


## 6. PHÃ‚N LOáº I Æ¯U TIÃŠN (MoSCoW)

### MUST HAVE (P0) - Báº¯t buá»™c cho MVP

**Module 1: Authentication**
- 1.1 ÄÄƒng kÃ½
- 1.2 ÄÄƒng nháº­p
- 1.4 ÄÄƒng xuáº¥t

**Module 2: Onboarding**
- 2.1 Welcome Screens
- 2.2 Initial Setup

**Module 3: Transaction**
- 3.1 ThÃªm giao dá»‹ch
- 3.2 Xem danh sÃ¡ch giao dá»‹ch
- 3.3 Xem chi tiáº¿t
- 3.4 Sá»­a giao dá»‹ch
- 3.5 XÃ³a giao dá»‹ch

**Module 4: Category**
- 4.1 Danh má»¥c máº·c Ä‘á»‹nh
- 4.2 Táº¡o category
- 4.5 Xem danh sÃ¡ch

**Module 5: Budget**
- 5.1 Táº¡o budget
- 5.2 Hiá»ƒn thá»‹ danh sÃ¡ch budget
- 5.6 Cáº£nh bÃ¡o vÆ°á»£t ngÃ¢n sÃ¡ch

**Module 6: Saving Goals**
- 6.1 Hiá»ƒn thá»‹ Net Balance
- 6.2 Táº¡o Saving Goal
- 6.3 Xem danh sÃ¡ch

**Module 7: Analysis**
- 7.1 Tá»•ng quan (biá»ƒu Ä‘á»“ cÆ¡ báº£n)
- 7.2 Chi tiáº¿t theo Category

**Module 8: Profile**
- 8.1 ThÃ´ng tin cÃ¡ nhÃ¢n
- 8.2 CÃ i Ä‘áº·t á»©ng dá»¥ng
- 8.4 Báº£o máº­t (Ä‘á»•i máº­t kháº©u)

---

### SHOULD HAVE (P1) - Quan trá»ng, phase 2

**Module 1: Authentication**
- 1.3 QuÃªn máº­t kháº©u

**Module 3: Transaction**
- 3.6 Lá»c vÃ  tÃ¬m kiáº¿m

**Module 4: Category**
- 4.3 Sá»­a category
- 4.4 XÃ³a category

**Module 5: Budget**
- 5.3 Xem chi tiáº¿t budget
- 5.4 Sá»­a budget
- 5.5 XÃ³a budget

**Module 6: Saving Goals**
- 6.4 Xem chi tiáº¿t Goal
- 6.5 Sá»­a Goal
- 6.6 XÃ³a Goal
- 6.7 ÄÃ¡nh dáº¥u hoÃ n thÃ nh

**Module 7: Analysis**
- 7.3 So sÃ¡nh theo thá»i gian
- 7.4 Xuáº¥t bÃ¡o cÃ¡o

**Module 8: Profile**
- 8.3 ThÃ´ng bÃ¡o
- 8.4 Báº£o máº­t (KhÃ³a app)
- 8.5 Sao lÆ°u & KhÃ´i phá»¥c
- 8.8 Giá»›i thiá»‡u & Há»— trá»£

---

## 8. TECH STACK

### Frontend (Mobile)
- **Framework:** React Native 
- **State Management:** Zustand 
- **Charts:** React Native Chart Kit 
- **UI Library:** React Native Paper / NativeBase
- **Navigation:** React Navigation
- **Supabase Client:** @supabase/supabase-js

### Backend & Database
- **BaaS Platform:** **Supabase** (Backend-as-a-Service)
- **Database:** PostgreSQL (managed by Supabase)
- **Authentication:** Supabase Auth (built-in)
  - Email/Password
- **Storage:** Supabase Storage (cho avatar, backup files)
- **Real-time:** Supabase Realtime (optional cho sync)
- **Edge Functions:** Supabase Edge Functions (cho business logic phá»©c táº¡p)

---

## 9. DATABASE SCHEMA (Supabase/PostgreSQL)

### Tá»•ng quan
- Supabase sá»­ dá»¥ng PostgreSQL vá»›i schema `auth` cho authentication
- App schema sá»­ dá»¥ng schema `public`
- Táº¥t cáº£ tables cÃ³ Row Level Security (RLS) enabled
- Primary keys sá»­ dá»¥ng UUID
- Timestamps sá»­ dá»¥ng `timestamptz` (timezone-aware)

---

### 1. profiles
*Extend thÃ´ng tin tá»« auth.users*

```sql
CREATE TABLE public.profiles (
  id UUID REFERENCES auth.users(id) ON DELETE CASCADE PRIMARY KEY,
  email TEXT NOT NULL,
  name TEXT,
  avatar_url TEXT,
  currency TEXT DEFAULT 'VND' NOT NULL,
  language TEXT DEFAULT 'vi' NOT NULL,
  theme TEXT DEFAULT 'light' NOT NULL, -- light, dark, auto
  date_format TEXT DEFAULT 'DD/MM/YYYY' NOT NULL,
  week_start INTEGER DEFAULT 1 NOT NULL, -- 0: Sunday, 1: Monday
  month_start INTEGER DEFAULT 1 NOT NULL, -- 1-31
  notifications_enabled BOOLEAN DEFAULT true NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

-- RLS Policies
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own profile"
  ON public.profiles FOR SELECT
  USING (auth.uid() = id);

CREATE POLICY "Users can update own profile"
  ON public.profiles FOR UPDATE
  USING (auth.uid() = id);

-- Indexes
CREATE INDEX profiles_email_idx ON public.profiles(email);

-- Trigger to auto-update updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$ LANGUAGE plpgsql;

CREATE TRIGGER update_profiles_updated_at
  BEFORE UPDATE ON public.profiles
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

-- Function to auto-create profile on signup
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS TRIGGER AS $
BEGIN
  INSERT INTO public.profiles (id, email, name)
  VALUES (NEW.id, NEW.email, NEW.raw_user_meta_data->>'name');
  RETURN NEW;
END;
$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW
  EXECUTE FUNCTION public.handle_new_user();
```

---

### 2. categories
*Danh má»¥c thu chi*

```sql
CREATE TABLE public.categories (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('income', 'expense')),
  icon TEXT NOT NULL DEFAULT 'ğŸ’°',
  color TEXT NOT NULL DEFAULT '#3B82F6',
  is_default BOOLEAN DEFAULT false NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  
  -- Constraints
  UNIQUE(user_id, name, type), -- KhÃ´ng trÃ¹ng tÃªn trong cÃ¹ng loáº¡i cho 1 user
  CHECK (name != '')
);

-- RLS Policies
ALTER TABLE public.categories ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own categories"
  ON public.categories FOR SELECT
  USING (auth.uid() = user_id OR user_id IS NULL); -- NULL = default categories

CREATE POLICY "Users can create own categories"
  ON public.categories FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own categories"
  ON public.categories FOR UPDATE
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own categories"
  ON public.categories FOR DELETE
  USING (auth.uid() = user_id AND is_default = false);

-- Indexes
CREATE INDEX categories_user_id_idx ON public.categories(user_id);
CREATE INDEX categories_type_idx ON public.categories(type);
CREATE INDEX categories_user_type_idx ON public.categories(user_id, type);

-- Trigger for updated_at
CREATE TRIGGER update_categories_updated_at
  BEFORE UPDATE ON public.categories
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

---

### 3. transactions
*Giao dá»‹ch thu chi*

```sql
CREATE TABLE public.transactions (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('income', 'expense')),
  amount DECIMAL(15, 2) NOT NULL CHECK (amount > 0),
  category_id UUID REFERENCES public.categories(id) ON DELETE RESTRICT NOT NULL,
  note TEXT,
  date DATE NOT NULL DEFAULT CURRENT_DATE,
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

-- RLS Policies
ALTER TABLE public.transactions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own transactions"
  ON public.transactions FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own transactions"
  ON public.transactions FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own transactions"
  ON public.transactions FOR UPDATE
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own transactions"
  ON public.transactions FOR DELETE
  USING (auth.uid() = user_id);

-- Indexes
CREATE INDEX transactions_user_id_idx ON public.transactions(user_id);
CREATE INDEX transactions_date_idx ON public.transactions(date DESC);
CREATE INDEX transactions_category_id_idx ON public.transactions(category_id);
CREATE INDEX transactions_user_date_idx ON public.transactions(user_id, date DESC);
CREATE INDEX transactions_user_type_idx ON public.transactions(user_id, type);

-- Trigger for updated_at
CREATE TRIGGER update_transactions_updated_at
  BEFORE UPDATE ON public.transactions
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

---

### 4. budgets
*NgÃ¢n sÃ¡ch theo category*

```sql
CREATE TABLE public.budgets (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  category_id UUID REFERENCES public.categories(id) ON DELETE CASCADE NOT NULL,
  amount DECIMAL(15, 2) NOT NULL CHECK (amount > 0),
  period TEXT NOT NULL DEFAULT 'month' CHECK (period IN ('month', 'quarter', 'year')),
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  alert_threshold INTEGER DEFAULT 80 CHECK (alert_threshold >= 0 AND alert_threshold <= 100),
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  
  -- Constraints
  CHECK (end_date > start_date),
  UNIQUE(user_id, category_id, period, start_date) -- 1 category chá»‰ 1 budget trong 1 period
);

-- RLS Policies
ALTER TABLE public.budgets ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own budgets"
  ON public.budgets FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own budgets"
  ON public.budgets FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own budgets"
  ON public.budgets FOR UPDATE
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own budgets"
  ON public.budgets FOR DELETE
  USING (auth.uid() = user_id);

-- Indexes
CREATE INDEX budgets_user_id_idx ON public.budgets(user_id);
CREATE INDEX budgets_category_id_idx ON public.budgets(category_id);
CREATE INDEX budgets_dates_idx ON public.budgets(start_date, end_date);

-- Trigger for updated_at
CREATE TRIGGER update_budgets_updated_at
  BEFORE UPDATE ON public.budgets
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

---

### 5. saving_goals
*Má»¥c tiÃªu tiáº¿t kiá»‡m*

```sql
CREATE TABLE public.saving_goals (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  name TEXT NOT NULL CHECK (name != ''),
  target_amount DECIMAL(15, 2) NOT NULL CHECK (target_amount > 0),
  start_date DATE NOT NULL,
  target_date DATE NOT NULL CHECK (target_date > start_date),
  icon TEXT DEFAULT 'ğŸ¯',
  color TEXT DEFAULT '#10B981',
  note TEXT,
  status TEXT DEFAULT 'active' CHECK (status IN ('active', 'completed', 'archived')),
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);

-- RLS Policies
ALTER TABLE public.saving_goals ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own goals"
  ON public.saving_goals FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can create own goals"
  ON public.saving_goals FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own goals"
  ON public.saving_goals FOR UPDATE
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own goals"
  ON public.saving_goals FOR DELETE
  USING (auth.uid() = user_id);

-- Indexes
CREATE INDEX saving_goals_user_id_idx ON public.saving_goals(user_id);
CREATE INDEX saving_goals_status_idx ON public.saving_goals(status);
CREATE INDEX saving_goals_dates_idx ON public.saving_goals(start_date, target_date);

-- Trigger for updated_at
CREATE TRIGGER update_saving_goals_updated_at
  BEFORE UPDATE ON public.saving_goals
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

---

### 6. Database Views & Functions

#### View: Current Balance
```sql
CREATE OR REPLACE VIEW public.user_balance AS
SELECT 
  user_id,
  COALESCE(SUM(CASE WHEN type = 'income' THEN amount ELSE -amount END), 0) as current_balance,
  COALESCE(SUM(CASE WHEN type = 'income' THEN amount ELSE 0 END), 0) as total_income,
  COALESCE(SUM(CASE WHEN type = 'expense' THEN amount ELSE 0 END), 0) as total_expense
FROM public.transactions
GROUP BY user_id;
```

#### Function: Get Goal Progress
```sql
CREATE OR REPLACE FUNCTION public.get_goal_progress(goal_id UUID)
RETURNS TABLE (
  goal_id UUID,
  goal_name TEXT,
  target_amount DECIMAL,
  current_amount DECIMAL,
  progress_percent DECIMAL
) AS $
BEGIN
  RETURN QUERY
  SELECT 
    sg.id as goal_id,
    sg.name as goal_name,
    sg.target_amount,
    COALESCE(
      (SELECT SUM(CASE WHEN t.type = 'income' THEN t.amount ELSE -t.amount END)
       FROM public.transactions t
       WHERE t.user_id = sg.user_id 
       AND t.date >= sg.start_date 
       AND t.date <= CURRENT_DATE), 
      0
    ) as current_amount,
    ROUND(
      (COALESCE(
        (SELECT SUM(CASE WHEN t.type = 'income' THEN t.amount ELSE -t.amount END)
         FROM public.transactions t
         WHERE t.user_id = sg.user_id 
         AND t.date >= sg.start_date 
         AND t.date <= CURRENT_DATE), 
        0
      ) / sg.target_amount) * 100, 
      2
    ) as progress_percent
  FROM public.saving_goals sg
  WHERE sg.id = goal_id;
END;
$ LANGUAGE plpgsql SECURITY DEFINER;
```

#### Function: Get Budget Spending
```sql
CREATE OR REPLACE FUNCTION public.get_budget_spending(budget_id UUID)
RETURNS TABLE (
  budget_id UUID,
  budget_amount DECIMAL,
  spent_amount DECIMAL,
  remaining_amount DECIMAL,
  usage_percent DECIMAL
) AS $
BEGIN
  RETURN QUERY
  SELECT 
    b.id as budget_id,
    b.amount as budget_amount,
    COALESCE(
      (SELECT SUM(t.amount)
       FROM public.transactions t
       WHERE t.user_id = b.user_id 
       AND t.category_id = b.category_id
       AND t.type = 'expense'
       AND t.date >= b.start_date 
       AND t.date <= b.end_date), 
      0
    ) as spent_amount,
    b.amount - COALESCE(
      (SELECT SUM(t.amount)
       FROM public.transactions t
       WHERE t.user_id = b.user_id 
       AND t.category_id = b.category_id
       AND t.type = 'expense'
       AND t.date >= b.start_date 
       AND t.date <= b.end_date), 
      0
    ) as remaining_amount,
    ROUND(
      (COALESCE(
        (SELECT SUM(t.amount)
         FROM public.transactions t
         WHERE t.user_id = b.user_id 
         AND t.category_id = b.category_id
         AND t.type = 'expense'
         AND t.date >= b.start_date 
         AND t.date <= b.end_date), 
        0
      ) / b.amount) * 100, 
      2
    ) as usage_percent
  FROM public.budgets b
  WHERE b.id = budget_id;
END;
$ LANGUAGE plpgsql SECURITY DEFINER;
```

---

### 7. Default Categories Seed Data

```sql
-- Insert default income categories (user_id = NULL means available for all)
INSERT INTO public.categories (user_id, name, type, icon, color, is_default) VALUES
(NULL, 'LÆ°Æ¡ng', 'income', 'ğŸ’°', '#10B981', true),
(NULL, 'ThÆ°á»Ÿng', 'income', 'ğŸ', '#059669', true),
(NULL, 'Äáº§u tÆ°', 'income', 'ğŸ“ˆ', '#34D399', true),
(NULL, 'CÃ´ng viá»‡c thÃªm', 'income', 'ğŸ’¼', '#6EE7B7', true),
(NULL, 'Thu nháº­p khÃ¡c', 'income', 'ğŸ¯', '#A7F3D0', true);

-- Insert default expense categories
INSERT INTO public.categories (user_id, name, type, icon, color, is_default) VALUES
(NULL, 'Ä‚n uá»‘ng', 'expense', 'ğŸ”', '#EF4444', true),
(NULL, 'Äi láº¡i', 'expense', 'ğŸš—', '#F97316', true),
(NULL, 'Mua sáº¯m', 'expense', 'ğŸ›’', '#F59E0B', true),
(NULL, 'Giáº£i trÃ­', 'expense', 'ğŸ®', '#EC4899', true),
(NULL, 'Sá»©c khá»e', 'expense', 'ğŸ’Š', '#DC2626', true),
(NULL, 'NhÃ  cá»­a', 'expense', 'ğŸ ', '#7C3AED', true),
(NULL, 'GiÃ¡o dá»¥c', 'expense', 'ğŸ“š', '#2563EB', true),
(NULL, 'Gia Ä‘Ã¬nh', 'expense', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', '#8B5CF6', true),
(NULL, 'HÃ³a Ä‘Æ¡n & Dá»‹ch vá»¥', 'expense', 'ğŸ“±', '#0EA5E9', true),
(NULL, 'ChÄƒm sÃ³c cÃ¡ nhÃ¢n', 'expense', 'ğŸ’‡', '#06B6D4', true),
(NULL, 'QuÃ  táº·ng', 'expense', 'ğŸ', '#14B8A6', true),
(NULL, 'Chi phÃ­ khÃ¡c', 'expense', 'ğŸ“¦', '#64748B', true);
```

---

### 8. Storage Buckets (Supabase Storage)

```sql
-- Create bucket for user avatars
INSERT INTO storage.buckets (id, name, public) 
VALUES ('avatars', 'avatars', true);

-- RLS Policy for avatars bucket
CREATE POLICY "Users can upload own avatar"
  ON storage.objects FOR INSERT
  WITH CHECK (
    bucket_id = 'avatars' 
    AND auth.uid()::text = (storage.foldername(name))[1]
  );

CREATE POLICY "Users can update own avatar"
  ON storage.objects FOR UPDATE
  USING (
    bucket_id = 'avatars' 
    AND auth.uid()::text = (storage.foldername(name))[1]
  );

CREATE POLICY "Avatars are publicly accessible"
  ON storage.objects FOR SELECT
  USING (bucket_id = 'avatars');

-- Create bucket for backups (private)
INSERT INTO storage.buckets (id, name, public) 
VALUES ('backups', 'backups', false);

CREATE POLICY "Users can manage own backups"
  ON storage.objects FOR ALL
  USING (
    bucket_id = 'backups' 
    AND auth.uid()::text = (storage.foldername(name))[1]
  );
```

---

### 9. Migration Script (Complete Setup)

Äá»ƒ setup toÃ n bá»™ database, cháº¡y file SQL nÃ y trong Supabase SQL Editor:

```sql
-- File: 001_initial_schema.sql

-- 1. Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- 2. Create update_updated_at function
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$ LANGUAGE plpgsql;

-- 3. Create profiles table
-- [Copy profiles table creation from above]

-- 4. Create categories table
-- [Copy categories table creation from above]

-- 5. Create transactions table
-- [Copy transactions table creation from above]

-- 6. Create budgets table
-- [Copy budgets table creation from above]

-- 7. Create saving_goals table
-- [Copy saving_goals table creation from above]

-- 8. Create views
-- [Copy views from above]

-- 9. Create functions
-- [Copy functions from above]

-- 10. Seed default categories
-- [Copy seed data from above]

-- 11. Setup storage
-- [Copy storage setup from above]
```

---

## 10. SUPABASE CLIENT USAGE (Sample Code)

### Setup Supabase Client

```javascript
// lib/supabase.js
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.SUPABASE_URL;
const supabaseAnonKey = process.env.SUPABASE_ANON_KEY;

export const supabase = createClient(supabaseUrl, supabaseAnonKey);
```

---

### Authentication

#### Sign Up
```javascript
const { data, error } = await supabase.auth.signUp({
  email: 'user@example.com',
  password: 'password123',
  options: {
    data: {
      name: 'John Doe'
    }
  }
});
```

#### Sign In
```javascript
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'user@example.com',
  password: 'password123'
});
```

#### Sign In with Google
```javascript
const { data, error } = await supabase.auth.signInWithOAuth({
  provider: 'google'
});
```

#### Sign Out
```javascript
const { error } = await supabase.auth.signOut();
```

#### Get Current User
```javascript
const { data: { user } } = await supabase.auth.getUser();
```

#### Reset Password
```javascript
// Send reset email
const { data, error } = await supabase.auth.resetPasswordForEmail(
  'user@example.com',
  { redirectTo: 'myapp://reset-password' }
);

// Update password
const { data, error } = await supabase.auth.updateUser({
  password: 'new_password'
});
```

---

### Profile Operations

#### Get Profile
```javascript
const { data: profile, error } = await supabase
  .from('profiles')
  .select('*')
  .eq('id', user.id)
  .single();
```

#### Update Profile
```javascript
const { data, error } = await supabase
  .from('profiles')
  .update({ 
    name: 'New Name',
    currency: 'USD',
    theme: 'dark'
  })
  .eq('id', user.id);
```

#### Upload Avatar
```javascript
const file = event.target.files[0];
const fileExt = file.name.split('.').pop();
const fileName = `${user.id}/avatar.${fileExt}`;

// Upload to storage
const { data: uploadData, error: uploadError } = await supabase.storage
  .from('avatars')
  .upload(fileName, file, { upsert: true });

// Get public URL
const { data: { publicUrl } } = supabase.storage
  .from('avatars')
  .getPublicUrl(fileName);

// Update profile
const { error: updateError } = await supabase
  .from('profiles')
  .update({ avatar_url: publicUrl })
  .eq('id', user.id);
```

---

### Transaction Operations

#### Create Transaction
```javascript
const { data, error } = await supabase
  .from('transactions')
  .insert({
    user_id: user.id,
    type: 'expense',
    amount: 50000,
    category_id: categoryId,
    note: 'Lunch at restaurant',
    date: '2025-10-08'
  })
  .select()
  .single();
```

#### Get Transactions (with pagination & filters)
```javascript
const { data: transactions, error } = await supabase
  .from('transactions')
  .select(`
    *,
    categories (
      id,
      name,
      icon,
      color
    )
  `)
  .eq('user_id', user.id)
  .gte('date', startDate)
  .lte('date', endDate)
  .order('date', { ascending: false })
  .range(0, 49); // Pagination: first 50 items
```

#### Update Transaction
```javascript
const { data, error } = await supabase
  .from('transactions')
  .update({ 
    amount: 75000,
    note: 'Updated note'
  })
  .eq('id', transactionId)
  .eq('user_id', user.id); // Security: ensure user owns the transaction
```

#### Delete Transaction
```javascript
const { error } = await supabase
  .from('transactions')
  .delete()
  .eq('id', transactionId)
  .eq('user_id', user.id);
```

#### Search Transactions
```javascript
const { data, error } = await supabase
  .from('transactions')
  .select('*, categories(*)')
  .eq('user_id', user.id)
  .ilike('note', `%${searchQuery}%`)
  .order('date', { ascending: false });
```

---

### Category Operations

#### Get All Categories (including defaults)
```javascript
const { data: categories, error } = await supabase
  .from('categories')
  .select('*')
  .or(`user_id.eq.${user.id},user_id.is.null`) // User's + default categories
  .eq('type', 'expense')
  .order('is_default', { ascending: false }); // Default first
```

#### Create Custom Category
```javascript
const { data, error } = await supabase
  .from('categories')
  .insert({
    user_id: user.id,
    name: 'Coffee',
    type: 'expense',
    icon: 'â˜•',
    color: '#8B4513'
  })
  .select()
  .single();
```

#### Update Category
```javascript
const { data, error } = await supabase
  .from('categories')
  .update({ 
    name: 'Updated Name',
    icon: 'ğŸ¯'
  })
  .eq('id', categoryId)
  .eq('user_id', user.id);
```

#### Delete Category
```javascript
// Note: Will fail if transactions reference this category (due to RESTRICT)
const { error } = await supabase
  .from('categories')
  .delete()
  .eq('id', categoryId)
  .eq('user_id', user.id);
```

---

### Budget Operations

#### Create Budget
```javascript
const { data, error } = await supabase
  .from('budgets')
  .insert({
    user_id: user.id,
    category_id: categoryId,
    amount: 1000000,
    period: 'month',
    start_date: '2025-10-01',
    end_date: '2025-10-31',
    alert_threshold: 80
  })
  .select()
  .single();
```

#### Get All Budgets with Spending
```javascript
const { data: budgets, error } = await supabase
  .rpc('get_budget_spending', { budget_id: budgetId });

// Or get all budgets and calculate spending in app
const { data: budgets, error } = await supabase
  .from('budgets')
  .select(`
    *,
    categories (
      id,
      name,
      icon,
      color
    )
  `)
  .eq('user_id', user.id)
  .gte('end_date', new Date().toISOString().split('T')[0]);
```

#### Update Budget
```javascript
const { data, error } = await supabase
  .from('budgets')
  .update({ 
    amount: 1500000,
    alert_threshold: 90
  })
  .eq('id', budgetId)
  .eq('user_id', user.id);
```

---

### Saving Goals Operations

#### Create Saving Goal
```javascript
const { data, error } = await supabase
  .from('saving_goals')
  .insert({
    user_id: user.id,
    name: 'Mua Macbook',
    target_amount: 30000000,
    start_date: '2025-01-01',
    target_date: '2025-06-01',
    icon: 'ğŸ’»',
    color: '#3B82F6',
    note: 'Macbook Pro M3'
  })
  .select()
  .single();
```

#### Get All Goals with Progress
```javascript
// Using RPC function
const { data: goals, error } = await supabase
  .rpc('get_goal_progress', { goal_id: goalId });

// Or calculate in app
const { data: goals, error } = await supabase
  .from('saving_goals')
  .select('*')
  .eq('user_id', user.id)
  .order('target_date', { ascending: true });

// Then for each goal, calculate progress:
for (const goal of goals) {
  const { data: transactions } = await supabase
    .from('transactions')
    .select('type, amount')
    .eq('user_id', user.id)
    .gte('date', goal.start_date)
    .lte('date', new Date().toISOString().split('T')[0]);
  
  const currentAmount = transactions.reduce((sum, t) => 
    sum + (t.type === 'income' ? t.amount : -t.amount), 0
  );
  
  goal.current_amount = currentAmount;
  goal.progress = (currentAmount / goal.target_amount) * 100;
}
```

---

### Analysis & Reports

#### Get Net Balance
```javascript
const { data, error } = await supabase
  .from('user_balance')
  .select('*')
  .eq('user_id', user.id)
  .single();
```

#### Get Monthly Income vs Expense
```javascript
const { data: transactions, error } = await supabase
  .from('transactions')
  .select('type, amount, date')
  .eq('user_id', user.id)
  .gte('date', '2025-10-01')
  .lte('date', '2025-10-31');

// Process in app
const income = transactions
  .filter(t => t.type === 'income')
  .reduce((sum, t) => sum + parseFloat(t.amount), 0);

const expense = transactions
  .filter(t => t.type === 'expense')
  .reduce((sum, t) => sum + parseFloat(t.amount), 0);
```

#### Get Expenses by Category
```javascript
const { data: expenses, error } = await supabase
  .from('transactions')
  .select(`
    amount,
    categories (
      id,
      name,
      icon,
      color
    )
  `)
  .eq('user_id', user.id)
  .eq('type', 'expense')
  .gte('date', startDate)
  .lte('date', endDate);

// Group by category in app
const byCategory = expenses.reduce((acc, t) => {
  const categoryId = t.categories.id;
  if (!acc[categoryId]) {
    acc[categoryId] = {
      category: t.categories,
      total: 0,
      count: 0
    };
  }
  acc[categoryId].total += parseFloat(t.amount);
  acc[categoryId].count += 1;
  return acc;
}, {});
```

---

### Real-time Subscriptions (Optional)

#### Subscribe to Transaction Changes
```javascript
const transactionSubscription = supabase
  .channel('transactions')
  .on(
    'postgres_changes',
    {
      event: '*', // INSERT, UPDATE, DELETE
      schema: 'public',
      table: 'transactions',
      filter: `user_id=eq.${user.id}`
    },
    (payload) => {
      console.log('Transaction changed:', payload);
      // Update UI accordingly
    }
  )
  .subscribe();

// Cleanup
transactionSubscription.unsubscribe();
```

---

## 11. TIÃŠU CHÃ CHáº¤P NHáº¬N Tá»”NG THá»‚

### MVP Acceptance Criteria

**Functional:**
- [ ] NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘Äƒng kÃ½ vÃ  Ä‘Äƒng nháº­p qua Supabase Auth
- [ ] NgÆ°á»i dÃ¹ng xem Ä‘Æ°á»£c Onboarding vÃ  hoÃ n thÃ nh Initial Setup
- [ ] Profile tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o khi Ä‘Äƒng kÃ½ (via trigger)
- [ ] NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ thÃªm giao dá»‹ch thu/chi vá»›i category
- [ ] Sá»‘ dÆ° Net Balance Ä‘Æ°á»£c tÃ­nh chÃ­nh xÃ¡c tá»« transactions
- [ ] NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ táº¡o category tÃ¹y chá»‰nh (default categories luÃ´n cÃ³ sáºµn)
- [ ] NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ táº¡o budget cho category chi tiÃªu
- [ ] NgÆ°á»i dÃ¹ng nháº­n Ä‘Æ°á»£c cáº£nh bÃ¡o khi gáº§n Ä‘áº¡t/vÆ°á»£t budget
- [ ] NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ táº¡o Saving Goal vÃ  xem tiáº¿n Ä‘á»™ (tÃ­nh tá»« Net Balance)
- [ ] Analysis screen hiá»ƒn thá»‹ biá»ƒu Ä‘á»“ thu chi vÃ  theo category
- [ ] NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ sá»­a/xÃ³a giao dá»‹ch, category, budget, goals
- [ ] Profile screen cho phÃ©p cÃ i Ä‘áº·t cÆ¡ báº£n vÃ  Ä‘á»•i avatar
- [ ] Row Level Security (RLS) hoáº¡t Ä‘á»™ng Ä‘Ãºng - user chá»‰ xem Ä‘Æ°á»£c data cá»§a mÃ¬nh
- [ ] Upload avatar lÃªn Supabase Storage thÃ nh cÃ´ng

**Non-Functional:**
- [ ] App load time < 2s
- [ ] Supabase queries response time < 500ms
- [ ] KhÃ´ng crash, khÃ´ng bug nghiÃªm trá»ng
- [ ] UI/UX mÆ°á»£t mÃ , Ä‘áº¹p máº¯t
- [ ] Responsive trÃªn nhiá»u kÃ­ch thÆ°á»›c mÃ n hÃ¬nh
- [ ] Data Ä‘Æ°á»£c báº£o máº­t vá»›i RLS policies
- [ ] Authentication tokens Ä‘Æ°á»£c quáº£n lÃ½ an toÃ n
- [ ] Hoáº¡t Ä‘á»™ng offline vá»›i local cache (sá»­ dá»¥ng React Query)
- [ ] Sync tá»± Ä‘á»™ng khi cÃ³ internet

**Supabase-specific:**
- [ ] Database schema deployed thÃ nh cÃ´ng
- [ ] RLS policies test pass cho táº¥t cáº£ tables
- [ ] Default categories Ä‘Ã£ Ä‘Æ°á»£c seed
- [ ] Triggers vÃ  Functions hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c
- [ ] Storage buckets Ä‘Æ°á»£c config Ä‘Ãºng permissions
- [ ] Supabase realtime subscriptions hoáº¡t Ä‘á»™ng (náº¿u implement)

---

## 12. Rá»¦IS RO & GIáº¢I PHÃP

### Rá»§i ro 1: NgÆ°á»i dÃ¹ng nháº­p sai sá»‘ liá»‡u
**Giáº£i phÃ¡p:**
- Cho phÃ©p sá»­a/xÃ³a giao dá»‹ch dá»… dÃ ng
- Hiá»ƒn thá»‹ xÃ¡c nháº­n trÆ°á»›c khi lÆ°u sá»‘ tiá»n lá»›n
- TÃ­nh nÄƒng Undo (optional)

### Rá»§i ro 2: Máº¥t dá»¯ liá»‡u
**Giáº£i phÃ¡p:**
- Auto backup Ä‘á»‹nh ká»³
- Backup lÃªn cloud
- Khuyáº¿n khÃ­ch ngÆ°á»i dÃ¹ng backup thá»§ cÃ´ng

### Rá»§i ro 3: Performance khi cÃ³ nhiá»u giao dá»‹ch
**Giáº£i phÃ¡p:**
- Pagination cho danh sÃ¡ch giao dá»‹ch
- Lazy loading cho biá»ƒu Ä‘á»“
- Database indexing
- Caching

### Rá»§i ro 4: NgÆ°á»i dÃ¹ng khÃ´ng hiá»ƒu cÃ¡ch dÃ¹ng
**Giáº£i phÃ¡p:**
- Onboarding chi tiáº¿t
- Tooltips vÃ  hints
- FAQ trong app
- Video hÆ°á»›ng dáº«n

---

## 14. SUPABASE MONITORING & OBSERVABILITY

### Built-in Supabase Tools

**1. Dashboard Analytics:**
- API usage vÃ  performance
- Database connections
- Storage usage
- Auth activity (signups, logins)
- Query performance

**2. Database Monitoring:**
```sql
-- Check slow queries
SELECT * FROM pg_stat_statements 
ORDER BY total_exec_time DESC 
LIMIT 10;

-- Check table sizes
SELECT 
  schemaname,
  tablename,
  pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- Check RLS policy usage
SELECT * FROM pg_policies WHERE schemaname = 'public';
```

**3. Logging:**
- Real-time logs trong Supabase Dashboard
- Filter by level (info, warn, error)
- Search by message

**4. Alerts:**
- Setup alerts cho:
  - High error rates
  - Slow queries
  - High database CPU
  - Storage limit reached
  - Unusual auth activity

### External Monitoring

**Sentry Integration:**
```javascript
import * as Sentry from "@sentry/react-native";

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  integrations: [
    new Sentry.Integrations.ReactNativeTracing({
      tracingOrigins: ["localhost", /^\//],
    }),
  ],
  tracesSampleRate: 1.0,
});

// Capture Supabase errors
supabase.auth.onAuthStateChange((event, session) => {
  if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {
    Sentry.setUser(null);
  } else if (event === 'SIGNED_IN' && session) {
    Sentry.setUser({ id: session.user.id, email: session.user.email });
  }
});
```

---

**PhiÃªn báº£n:** 2.0  
**NgÃ y cáº­p nháº­t:** 08/10/2025  
**NgÆ°á»i táº¡o:** Product Owner  
**Tráº¡ng thÃ¡i:** Ready for Development